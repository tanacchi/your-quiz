# 工程スコープ確認ガイドライン

各開発工程で適切なスコープを維持し、作業範囲の重複や漏れを防ぐためのガイドラインです。

## 基本原則

### 1. 事前確認の義務

作業開始前に以下を必ず確認・問い合わせする：

- **工程の境界**: 今回の工程でどこまで作成するのか
- **詳細度の基準**: どの程度の具体性で記述するのか
- **除外事項**: 他の工程で扱うため今回は含めない内容
- **成果物の形式**: ドキュメントの構成や記述方式

### 2. 判断に迷った場合の対応

以下のような状況では必ず指示者に問い合わせる：

- **境界が曖昧**: 「この内容は今の工程で書くべきか？」
- **詳細度の判断**: 「どの程度詳細に書くべきか？」
- **重複の懸念**: 「他の工程と重複しないか？」
- **抜け漏れの心配**: 「必要な内容が不足していないか？」

### 3. 問い合わせフォーマット

```markdown
## [工程名] - スコープ確認

### 確認事項
[具体的に確認したい内容]

### 検討中の記述内容
[書こうとしている内容の概要]

### 懸念点
- A) [選択肢1の懸念]
- B) [選択肢2の懸念]

どちらの方針で進めるべきでしょうか？
```

## 工程別スコープ指針

### アーキテクチャ策定・技術選定

#### 確認すべきポイント
- **通信設計**: 方針レベルか、具体的なエンドポイントまでか
- **データ設計**: 概念レベルか、詳細スキーマまでか
- **技術選定**: 選定理由のみか、設定詳細まで含むか

#### 典型的な問い合わせ例
```markdown
communication-patterns.mdで、API設計の記述範囲について確認があります。

**検討中の記述内容:**
- 具体的なエンドポイント一覧（GET /api/quizzes/{id} 等）
- TypeScript interface定義
- レスポンス時間の具体的数値

**懸念点:**
- A) 方針のみ記述し、詳細はAPI設計工程に委ねる
- B) 具体例も含めて記述し、API設計工程での作業を軽減する

どちらの方針で進めるべきでしょうか？
```

### DDD設計

#### 確認すべきポイント
- **ドメインモデル**: 概念レベルか、実装可能なレベルまでか
- **インターフェース**: 型定義まで含むか、概念のみか
- **関係性**: 依存関係の詳細度はどの程度か

### API設計

#### 確認すべきポイント
- **仕様書形式**: OpenAPIの詳細度はどの程度か
- **実装詳細**: フレームワーク固有の実装まで含むか
- **テスト仕様**: APIテストの仕様まで含むか

### DB設計

#### 確認すべきポイント
- **スキーマ詳細**: 制約・インデックスまで含むか
- **マイグレーション**: 具体的なSQLまで作成するか
- **パフォーマンス**: チューニング方針まで含むか

## 実践的な確認手順

### 1. 作業開始時

```markdown
1. 工程定義文書の再確認
2. 前工程の成果物確認
3. 不明点の洗い出し
4. 指示者への確認（必要時）
```

### 2. 作業中の判断

```markdown
1. 記述しようとする内容の詳細度チェック
2. 他工程との重複可能性チェック
3. 実装に直接使える内容かチェック
4. 迷った場合は即座に問い合わせ
```

### 3. 作業完了時

```markdown
1. 工程の目的との整合性確認
2. 次工程への引き継ぎ内容確認
3. 不足・過剰な内容がないかチェック
4. 最終レビュー依頼
```

## 今回の事例から学ぶ教訓

### 問題が発生した状況
- **工程**: アーキテクチャ策定・技術選定
- **ファイル**: `communication-patterns.md`
- **問題内容**: 具体的なAPIエンドポイント設計が含まれていた

### 防止策
1. **事前確認**: 「API設計の記述範囲はどこまでですか？」
2. **判断基準**: 「実装に直接使える内容は後続工程で扱う」
3. **問い合わせ**: 「この表は詳細すぎませんか？」

### 改善された対応
```markdown
## アーキテクチャ策定段階での確認

API設計方針を記述中ですが、以下の内容を含めるべきか確認させてください：

**検討中の記述内容:**
- 具体的なエンドポイント一覧表
- レスポンス時間の具体的数値
- TypeScript interface定義

**判断基準:**
- A) 方針レベルのみ（例：「RESTful設計採用」）
- B) 具体例も含める（例：「GET /api/quizzes」）

どちらが適切でしょうか？
```

## 運用方針

1. **迷ったら確認**: 自己判断より問い合わせを優先
2. **具体例で確認**: 抽象的な質問より具体例で確認
3. **記録の蓄積**: 確認内容と回答をドキュメント化
4. **継続的改善**: 事例を元にガイドライン更新

---

**作成日**: 2025-07-27  
**目的**: 工程間のスコープ重複・漏れの防止  
**適用対象**: 全開発工程