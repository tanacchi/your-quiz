# ユビキタス言語辞書作成ガイド

## 目的

プロジェクトの仕様書をもとに、誰がアサインされても一貫性のあるユビキタス言語辞書を作成できるよう、明確で端的な指示とフォーマット・サンプルを提供する。

## 前提条件

- プロジェクトの仕様書が完成していること
- DDD（ドメイン駆動設計）の基本概念を理解していること
- BDDテスト実装での用語統一が必要であること

## 作成手順

### Step 1: 仕様書からの用語抽出

**実施内容**:

1. **ビジネス概念の抽出**: 仕様書から重要な名詞・動詞・状態を洗い出す
2. **ユーザー操作の抽出**: 画面遷移や操作フローから動作を特定
3. **システム処理の抽出**: 自動処理や業務ルールから状態変化を把握
4. **制約条件の抽出**: 文字数制限・必須項目・業務ルールを特定

**成果物**: 用語リスト（日本語・概念・定義・用法メモ）

### Step 2: DDD分類の実施

仕様書から抽出した用語を以下の基準でDDD分類する：

| 分類 | 判定基準 | 特徴 |
|------|----------|------|
| **Entity（エンティティ）** | IDで識別・状態変化あり・ライフサイクル管理 | Quiz, User, Administrator |
| **Value Object（値オブジェクト）** | 値そのものが識別子・不変・属性の組み合わせ | Question, CorrectAnswer, Tag |
| **State/Action（状態・動作）** | システム状態・ユーザー操作・処理フロー | Submit, Approved, SwipeGesture |

**成果物**: DDD分類済み用語リスト

### Step 3: 英語変数名の決定

**命名ルール**:

- **UpperCamelCase**: TypeScript実装での変数名として使用
- **略語禁止**: Quiz を Q などと略さない
- **複合語統一**: AnswerHistory（回答履歴）など表記を統一
- **BDD表現との一致**: Gherkinシナリオで使用する名称と完全一致

**例**:

- クイズ → Quiz（✓）, Q（✗）
- 回答履歴→ AnswerHistory（✓）, History（✗）

### Step 4: BDD表現例の作成

**Gherkin形式での表現ルール**:

| パターン | 用途 | 表現例 |
|----------|------|--------|
| **Given（前提条件）** | 状態・存在・設定 | `Given Quiz is Approved` |
| **When（実行・動作）** | アクション・操作・処理 | `When Creator submits Quiz` |
| **Then（結果・期待値）** | 結果・変更・表示 | `Then AnswerHistory is updated` |

**重要**: 英語用語名を必ず使用し、日本語名は使わない

## 必須フォーマット

### 基本構造

```markdown
# ユビキタス言語辞書

## 概要
[プロジェクトドメインの説明とユビキタス言語の用途]

## Core Dictionary
[全用語を一覧表で整理]

## エンティティ（Entity）
[IDで識別される概念の詳細定義]

## 値オブジェクト（Value Object）
[不変な値の組み合わせの詳細定義]

## 状態・動作（State/Action）
[システム状態とユーザー操作の詳細定義]

## BDD表現ガイドライン
[Gherkinシナリオでの表現方法]

## 使用上の注意
[統一ルールと制約事項]

## 更新履歴
[変更履歴の記録]
```

### Core Dictionary 表フォーマット

```markdown
| 日本語 | 英語/変数名 (UpperCamelCase) | 定義 | BDD表現例 |
|--------|------------------------------|------|-----------|
| **[日本語名]** | [UpperCamelCase英語名] | [ドメインでの用語定義] | [Given/When/Then例] |
```

### 詳細定義フォーマット（各分類共通）

```markdown
### [英語名]

* **日本語**: [日本語名]
* **英語/変数名**: [UpperCamelCase英語名]
* **定義**: [詳細な意味・役割・制約]
* **関連概念**: [他の用語との関係]
```

## 実装サンプル

### Core Dictionary 例

```markdown
| 日本語 | 英語/変数名 (UpperCamelCase) | 定義 | BDD表現例 |
|--------|------------------------------|------|-----------|
| **クイズ** | Quiz | ◯×形式の問題と正解・解説で構成される学習単位 | Given Quiz is approved |
| **問題文** | Question | ユーザーが判断を行う対象となるテキスト（500文字以内） | Given Question is displayed |
| **投稿** | Submit | ユーザーがクイズを新規作成してシステムに送信すること | When Creator submits Quiz |
```

### Entity詳細定義例

```markdown
### Quiz

* **日本語**: クイズ
* **英語/変数名**: Quiz
* **定義**: ◯×形式の問題と正解・解説で構成される学習単位
* **関連概念**: Creator, Question, CorrectAnswer, Explanation, Tag, Answer
```

### BDD表現ガイドライン例

```markdown
### Given（前提条件）

* 英語の用語名を使用: `Given Quiz is Approved`
* 状態を表現: `Given OfflineMode is active`
* エンティティの存在: `Given CreatorIdentification exists`
```

## 品質チェックリスト

### 必須要件

- [ ] **用語の一意性**: 同じ概念に複数の表現が混在していない
- [ ] **英語名の妥当性**: UpperCamelCaseで実装可能な名称
- [ ] **BDD表現の実用性**: Gherkinシナリオで実際に使える表現
- [ ] **DDD分類の妥当性**: Entity/ValueObject/State/Actionの分類が適切
- [ ] **関連概念の整合性**: 用語間の参照関係が正確

### 品質要件

- [ ] **完全性**: 仕様書のすべての重要概念を網羅
- [ ] **簡潔性**: 定義が明確で曖昧さがない
- [ ] **実装可能性**: TypeScript実装で直接利用可能
- [ ] **保守性**: 仕様変更時の影響範囲が明確

## 完了判定基準

### 必須成果物

1. **Core Dictionary表**: 全用語の一覧（日本語・英語・定義・BDD例）
2. **DDD分類別詳細定義**: Entity/ValueObject/State/Action各セクション
3. **BDD表現ガイドライン**: Gherkin記法での統一ルール
4. **使用上の注意**: 開発チーム向けの運用ルール

### 検証方法

1. **仕様書との対応確認**: 重要概念の漏れがないか
2. **実装シミュレーション**: TypeScriptでの変数名として使用可能か
3. **BDDシナリオ作成テスト**: 実際のテストケースが記述できるか
4. **チームレビュー**: ドメインエキスパートとの用語確認

## 運用ルール

### 更新管理

- **変更理由の記録**: 更新履歴テーブルで管理
- **影響範囲の明示**: 関連概念への影響を記載
- **バージョン管理**: gitコミット単位での変更追跡

### 統一性の維持

- **コードでの使用**: TypeScript変数名として統一使用
- **テストでの使用**: BDDシナリオで英語名使用
- **ドキュメントでの使用**: 技術文書では英語名、業務文書では日本語名
- **会話での使用**: 開発チーム内では英語名推奨

## 注意事項

### よくある間違い

1. **日本語と英語の混在**: BDD表現で日本語を使用
2. **略語の多用**: Quiz → Q など、理解しにくい短縮
3. **分類の曖昧さ**: Entity/ValueObjectの判定基準不明確
4. **関連概念の不備**: 用語間の依存関係が不明

### 成功のポイント

1. **仕様書の精読**: ドメイン知識の正確な理解
2. **チームとの協議**: 用語の統一に向けた合意形成
3. **継続的な見直し**: 実装進行に伴う用語の洗練
4. **実装との整合性**: コード品質向上への貢献

## 参考資料

- プロジェクト仕様書
- DDD戦術パターン（Entity/ValueObject）
- BDD/Gherkin記法
- TypeScript命名規約
