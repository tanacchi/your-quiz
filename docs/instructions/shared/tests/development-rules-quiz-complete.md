# 開発ルール理解確認問題集（答え合わせ用）

## ⚠️ 重要な注意事項

**この問題集は答え合わせ用の完全版です。直接指示されない限り読まないでください。**

この文書は開発者のルール理解度を確認するためのテスト用資料です。問題の答えを事前に知ることで、本来の目的である「コンテキストクリア後の正しい判断能力」の測定ができなくなります。

**使用方法**: 問題用紙・解答用紙での回答完了後、最終的な答え合わせでのみ使用してください。

## 対象ペルソナ

「Webやプログラミング技術、文章理解力は高いが、そのドキュメントで扱う対象についての知識はなく、指示を与えないと勝手な実装やバッドプラクティスを入れ込んだ実装をしてしまいがちで、目的や遵守事項を細かく明確に指示しないといけない開発者」

## 使用方法

1. 開発者にコンテキストをクリアしてもらう
2. 必要なドキュメント（workflow/、tools/、languages/ 配下）を読んでもらう
3. 以下の問題を順次出題し、回答と理由を求める
4. 想定回答と比較して理解度を評価する

---

## 問題集

| ユーザ指示・状況 | 求める対応 | 理由 |
|-----------|------------|------|
| **仕様整理フェーズ** |  |  |
| 「ユーザ投稿フォームをいい感じに作って」 | 仕様を明確にし対話を通してドキュメントを作成する | 作成するものを明確化し、テストなどを作成して成果物をクリアにした状態で作成すべきため |
| 「ログイン機能を実装して」 | 4W1H形式でユーザーストーリーを作成し、成功・失敗パターンをHTTPステータスコードと共に定義する | specification.mdに従い、仕様整理工程では必ずユーザーストーリーと成功/失敗パターンの整理が必須 |
| 「なるべく早く動くものを作って」 | 仕様整理→全体技術設計の順序を守り、ワークフローを省略しないことを説明する | workflow.mdで省略禁止が明記されており、段階的承認が必須 |
| **全体技術設計フェーズ** |  |  |
| 「データベースはMySQLで」 | アーキテクチャ全体を検討してからDB選定を行うこと、トレードオフ分析が必要なことを説明する | architecture.mdでデータアーキテクチャ方針は全体設計の一部として検討すべきと定義 |
| 「マイクロサービスにしよう」 | チーム規模、ビジネス要件、技術制約等を確認し、モノリスとの比較検討を表形式で整理する | architecture.mdでアーキテクチャパターン選定は判断基準とトレードオフの明示が必須 |
| 「RESTでAPIを作ろう」 | 同期/非同期の選択理由、API Gateway適用の要否など通信パターン全体の検討を提案する | architecture.mdで通信・統合パターンは全体的な検討が必要 |
| **DDD設計フェーズ** |  |  |
| 「UserクラスとOrderクラスを作って」 | エンティティ・VO・ドメインサービスの設計、境界コンテキスト（BC）の定義を先に行う | workflow.mdでDDD設計工程はBC、エンティティ/VO/ドメインサービス、ユースケースI/F設計が必須 |
| 「データベースのテーブル設計もやって」 | DDD設計完了後にDB設計工程で行うことを説明し、ドメインモデル優先を徹底する | workflow.mdで工程順序の遵守が必須、DDD→API→DB設計の順序 |
| **API設計フェーズ** |  |  |
| 「OpenAPIの仕様書を書いて」 | TypeSpecを使用したタイプセーフな仕様書作成、エラーハンドリング、セキュリティ要件の定義を含める | api-design.mdでTypeSpec使用とOpenAPI 3.0形式での包括的な設計が必須 |
| 「とりあえずGETだけでいいよ」 | 全エンドポイントの設計を行い、CRUD操作とエラーパターンを網羅的に定義する | api-design.mdで全エンドポイントのリクエスト/レスポンス構造とエラーハンドリングが完了判定基準 |
| **DB設計フェーズ** |  |  |
| 「ユーザーテーブルを作って」 | エンティティ/VOに基づくスキーマ設計、ER図作成、マイグレーションファイル雛形生成を行う | workflow.mdでDB設計工程はエンティティ/VOに基づくテーブルスキーマ設計が必須要件 |
| 「とりあえず動くように」 | データ整合性要件、制約定義、トランザクション境界を適切に設計する | specification.mdでデータ整合性要件とトランザクション要件の定義が必要 |
| **技術選定フェーズ** |  |  |
| 「ReactとExpressでいいよ」 | 選定理由、代替案との比較、プロジェクト要件との整合性を表形式で整理する | workflow.mdで技術選定工程は選定ライブラリとバージョン、理由が表形式で必須 |
| 「ORMは何使う？」 | neverthrow、バリデーションライブラリ等も含めた包括的な技術選定を提案する | workflow.mdで技術選定はneverthrowやORM、バリデーションライブラリなどを選定することが必須要件 |
| **BDDテスト実装フェーズ** |  |  |
| 「テストを書いて」 | Gherkin形式でのシナリオ記述、ユビキタス言語定義、Step Definitions実装を行う | bdd-implementation.mdでE2Eおよびドメイン結合シナリオをGherkin形式で記述することが必須 |
| 「動作確認用の簡単なテストで」 | 全シナリオをGiven-When-Then形式で記述し、実行可能な仕様として機能させる | bdd-implementation.mdで全シナリオのGherkin形式記述とStep Definitions実装が完了判定基準 |
| **スケルトン実装フェーズ** |  |  |
| 「骨組みを作って」 | APIルートやメッセージハンドラの骨組み実装、BDDテストが依然Redであることを確認する | workflow.mdでスケルトンコードがコンパイルし、BDDテストがすべてRedであることが完了判定基準 |
| **単体テスト実装フェーズ** |  |  |
| 「実装して」 | まずBDDかTDDテストの実装を提案する | テストを先に書くことが義務付けられている |
| 「ユニットテストを書いて」 | Red-Green-Refactorサイクルに従い、95%以上のカバレッジを達成する | unit-testing.mdでTDDサイクルと95%以上のテストカバレッジが必須 |
| 「テストは後でいいよ」 | TDD（テスト駆動開発）が義務付けられており、テスト先行が必須であることを説明する | unit-testing.mdとworkflow.mdでTDDでの単体テスト実装が明記 |
| **本実装フェーズ** |  |  |
| 「機能を実装して」 | アプリケーションおよびAPIルートへの組み込み、BDDテストのGreen化を確認する | workflow.mdで本実装は全てのBDDテストがGreenで通過することが完了判定基準 |
| **E2Eテスト実装フェーズ** |  |  |
| 「E2Eテストを作って」 | フロントからバックエンドまでのユーザーフローをカバーするシナリオを記述・実行する | workflow.mdでE2E工程はフロントからバックエンドまでのユーザーフローカバーが必須要件 |
| **Git操作** |  |  |
| 「コミットして」 | unstaged/untrackedファイルがなくなるまで最小単位で段階的にコミットし、日本語メッセージで変更理由を記述する | git.mdで段階的コミット完了まで継続、working tree cleanまで実行が必須 |
| 「いい感じにコミットして」 | 関連性の高いファイル群を論理的に分けて順次コミット、各コミットメッセージに変更理由とユーザー指示内容を含める | git.mdで最小単位コミット、日本語メッセージ、変更理由明記が必須 |
| 「では次に○○の機能を追加します」 | これまでの作業内容を段階的にコミットし、終わったらブランチを切って仕様策定を提案する | git.mdとワークフローからそう決められている |
| **TypeScript対応** |  |  |
| 「TypeScriptで型エラーが出てしまい、なかなか解消しない」 | anyなどは絶対に使わず、コードを追って根本原因を探り、5回の再試行でうまくいかなければユーザに状況をサマライズして指示を仰ぐ | typescript.mdより |
| 「anyで型エラーを回避して」 | anyの使用を拒否し、適切な型定義や型ガードの実装を提案する | typescript.mdでanyの使用が禁止されている |
| 「型エラーを無視して進めて」 | 型安全性を確保し、エラーの根本原因を特定して解決する | typescript.mdで型安全性の重視が明記 |
| **ツール使用前確認** |  |  |
| 「npm installして」 | tools/npm.mdの存在を確認し、指示があればそれに従って実行する | common.mdでツール使用前の必須確認が義務付け |
| 「Dockerでビルドして」 | tools/docker.mdの存在確認、指示ファイルがない場合はユーザーにルールを問い合わせる | common.mdで該当ツール指示の確認と、存在しない場合のユーザー問い合わせが必須 |
| **ADR作成判断** |  |  |
| 「アーキテクチャを決めました」 | 重要な技術的決定について、ADRでの記録をユーザーに提案する | workflow.mdで各工程完了後にADR作成判断が追加されている |
| 「技術選定が終わりました」 | フレームワーク、ライブラリ、データベース等の技術スタック選定について、ADRでの記録をユーザーに提案する | workflow.mdで技術選定工程完了後のADR作成判断が必須アクション |
| **エラーハンドリング** |  |  |
| 「エラーが出ているけど無視して」 | エラーの根本原因を調査し、適切な解決方法を提案、問題の回避は行わない | common.mdで問題の回避は絶対に行わないことが明記 |
| 「テストが失敗するので削除して」 | テストの削除やskipを拒否し、根本解決を目指すことを説明する | 開発ベストプラクティスでテストの削除は禁止、根本解決を目指すことが明記 |
| **レビュー・承認プロセス** |  |  |
| 「次の工程に進んで」 | 現工程の完了をユーザーに報告し、レビューを依頼してから承認を得る | workflow.mdで各工程完了後の必須アクションとして直ちにユーザーレビュー依頼が明記 |
| 「レビューはいいから実装して」 | 段階的承認が必須であり、ユーザーレビューを経てから次工程に進む必要があることを説明する | workflow.mdで段階的承認必須が重要な実行原則 |
| **プロジェクト開始時** |  |  |
| 「新しいプロジェクトを始めよう」 | mise.tomlの存在確認、mise installでのツールバージョン統一を実行する | common.mdでプロジェクト開始時のmise.toml確認とツールバージョン統一が必須 |
| **工程判断・遷移** |  |  |
| 「要件が曖昧だから実装しながら決めよう」 | BDDテスト実装工程への遷移を提案し、要件不明確時の対処法を説明する | workflow.mdで要件不明確時はBDD遷移が推奨、ユーザー承認を得てから移行が必須 |
| 「設計はいいから実装から始めて」 | 承認されたワークフローを省略しないこと、仕様整理から順次進めることを説明する | workflow.mdで省略禁止が重要な実行原則として明記 |
| **品質・保守性** |  |  |
| 「動けばいいから適当に作って」 | コード品質を損なう変更は一時的な対応であっても許されないことを説明する | common.mdでコード品質を損なう変更の禁止が明記 |
| 「とりあえず動くように修正して」 | 適切な設計とテストを伴う実装を提案し、技術的負債の蓄積を防ぐ | 開発ベストプラクティスで保守性・品質重視が明記 |
| **実装過程でのトラブル対応** |  |  |
| 「テストが通らないけど、とりあえずテストをコメントアウトして」 | テストの削除・コメントアウト・skipを拒否し、テスト失敗の根本原因を調査・解決する | 開発ベストプラクティスでテストの削除は禁止、根本解決を目指すことが明記 |
| 「型エラーが解消されない。anyで対応して」 | anyの使用を拒否し、5回の再試行でも解決しない場合は状況をサマライズしてユーザーに指示を仰ぐ | typescript.mdでanyの使用が禁止、根本解決のための再試行が必須 |
| 「ビルドエラーが出るけど、該当箇所を削除して進めて」 | エラーの根本原因を調査し、適切な解決方法を提案、回避的な削除は行わない | common.mdで問題の回避は絶対に行わないことが明記 |
| 「BDDテストが複雑すぎる。簡単なテストに変更して」 | Gherkin形式での全シナリオ記述が必須であることを説明し、複雑さの原因を分析・対処する | workflow.mdでBDDテスト実装工程の完了判定基準が明記 |
| 「マイグレーションでエラーが出る。データを一旦削除して」 | データ削除を拒否し、マイグレーション設計の見直しやスキーマ修正で根本解決を図る | データ整合性要件を損なう回避策は禁止 |
| **仕様策定支援・指導場面** |  |  |
| 「ユーザーがログインできない場合の動作について、どう思いますか？」 | 4W1H形式でユーザーストーリーを整理し、成功・失敗パターンをHTTPステータスコードと共に定義することを提案する | specification.mdに従い、仕様整理工程での必須要件 |
| 「APIのエラーレスポンス設計で迷っています。アドバイスください」 | エラーハンドリング戦略を体系的に整理し、全エンドポイントでの一貫したエラーレスポンス設計を提案する | api-design.mdで包括的なエラーハンドリング設計が必須 |
| 「データベースの正規化レベルをどこまでにするべきか相談したい」 | エンティティ・VOに基づくスキーマ設計原則を説明し、ドメインモデルとの整合性を重視した設計を提案する | workflow.mdでDB設計工程はエンティティ/VOに基づく設計が必須 |
| 「非同期処理を入れるかどうか判断に迷っています」 | 通信パターンの選定マトリクスを参照し、ユースケース特性に基づく体系的な判断基準を提示する | architecture.mdで通信方式選定の判断基準が明記 |
| 「このドメインモデルで境界コンテキストの分け方はこれで適切でしょうか？」 | BC、エンティティ・VO・ドメインサービスの設計原則を説明し、ユビキタス言語に基づく境界設計を支援する | workflow.mdでDDD設計工程の必須要件として明記 |
| **技術的課題の相談・指導** |  |  |
| 「パフォーマンスが悪いです。キャッシュを入れればいいですか？」 | まず原因分析を行い、アーキテクチャ全体でのパフォーマンス設計方針に基づく包括的な解決策を提案する | architecture.mdでパフォーマンス設計方針の体系的検討が必要 |
| 「セキュリティ要件をどこまで考慮すべきか分からない」 | 多層防御戦略とゼロトラスト原則に基づく体系的なセキュリティ要件定義を支援する | architecture.mdでセキュリティアーキテクチャ方針が明記 |
| 「外部APIとの連携でエラーハンドリングはどうすればいい？」 | Circuit Breaker、Bulkhead等の障害対応方針を説明し、外部システム連携のエラー戦略を体系的に設計する | architecture.mdで障害対応方針が明記 |
| 「テストのカバレッジが95%に届かない。どうしましょう？」 | カバレッジ不足の原因を分析し、TDDサイクルの徹底とテスト戦略の見直しを指導する | unit-testing.mdで95%以上のテストカバレッジが必須 |
| **実装中の仕様矛盾発見** |  |  |
| 「実装中に、仕様書で矛盾を発見しました。どう対処しますか？」 | 実装を停止し、仕様整理工程に戻って矛盾を解決してから再開することを提案、ユーザー承認を得る | workflow.mdで前工程への戻りは必ずユーザー承認が必要 |
| 「API設計とDB設計で整合性が取れていないことが判明しました」 | API設計工程に戻り、エンティティ・VOとの整合性を確保した設計に修正することを提案する | workflow.mdで工程順序の遵守とドメインモデル優先が必須 |
| 「BDDテスト実行中に、要件の解釈が曖昧な部分を発見しました」 | BDDテスト実行を停止し、仕様整理工程に戻って要件を明確化してから再開することを提案する | workflow.mdで要件不明確時のBDD遷移条件に該当 |
| 「単体テスト作成中に、ドメインモデルの設計に問題があることが分かりました」 | 単体テスト実装を停止し、DDD設計工程に戻ってドメインモデルを修正することを提案する | workflow.mdで前工程への戻りと段階的承認が必要 |
| **工程管理・品質管理の指導** |  |  |
| 「実装が終わったので次の機能に移りたいのですが」 | E2Eテストまで完了し、全BDDテストがGreenで通過することを確認してから次機能に移ることを説明する | workflow.mdで11工程すべての完了が必要 |
| 「工程を飛ばして実装したら効率的だと思うのですが」 | 承認されたワークフローの省略禁止を説明し、段階的承認による品質確保の重要性を指導する | workflow.mdで省略禁止が重要な実行原則 |
| 「テストコードも同時に書けば早いと思うのですが」 | TDD（テスト駆動開発）の原則を説明し、テスト先行での実装が義務付けられていることを指導する | unit-testing.mdとworkflow.mdでTDDでの単体テスト実装が明記 |
| 「レビューに時間がかかるので、先に次の作業を始めたいです」 | 段階的承認必須を説明し、各工程完了後に必ずユーザーレビューを経てから次工程に進むことを指導する | workflow.mdで段階的承認必須が重要な実行原則 |
| **長期的な技術判断・指導** |  |  |
| 「将来的な拡張性を考えて、今のうちにマイクロサービス化しませんか？」 | チーム規模、ビジネス要件、技術制約等を総合的に評価し、現在の要件に最適なアーキテクチャ選択を指導する | architecture.mdでアーキテクチャ選定は判断基準とトレードオフの明示が必須 |
| 「この技術選定は将来的に問題になりませんか？」 | 技術選定の判断基準とトレードオフを再確認し、必要に応じてADRでの記録を提案する | workflow.mdで技術選定工程完了後のADR作成判断が明記 |
| 「運用を考えると、ログ設計はどうすべきでしょうか？」 | システム全体の運用要件を確認し、モニタリング・ログ戦略を非機能要件として体系的に設計することを提案する | architecture.mdで運用・監視要件の検討が必要 |

---

## 評価基準

### 優秀（90%以上正解）
- ドキュメントの内容を正確に理解し、適切な判断ができている
- ワークフローと横断的ルールの両方を適切に適用できている
- ユーザー対話と段階的承認の重要性を理解している

### 良好（70-89%正解）
- 基本的なルールは理解しているが、一部で判断に迷いがある
- ワークフローまたは横断的ルールのどちらかで理解不足がある

### 要改善（70%未満）
- ドキュメントの理解が不十分
- 独断での判断や省略を行う傾向がある
- 追加のトレーニングと指導が必要

## 注意事項

- この問題集の内容は定期的に更新される可能性があります
- 実際の開発時は、常に最新のドキュメントを参照してください
- 不明な点があれば、必ずユーザーに確認を求めてください