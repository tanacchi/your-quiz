# ã‚¯ã‚¤ã‚ºä½œæˆãƒ•ãƒ­ãƒ¼

## æ¦‚è¦

åŒ¿åãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¯ã‚¤ã‚ºã‚’ä½œæˆãƒ»æŠ•ç¨¿ã™ã‚‹ä¸€é€£ã®æµã‚Œã‚’ç¤ºã—ã¾ã™ã€‚æ®µéšçš„å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã«ã‚ˆã‚‹ä½¿ã„ã‚„ã™ã„ä½œæˆä½“é¨“ã¨ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ã‚ˆã‚‹å“è³ªç¢ºä¿ã‚’æä¾›ã—ã€æ‰¿èªå¾…ã¡çŠ¶æ…‹ã®æ˜ç¢ºãªç®¡ç†ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

## å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [US-02: ã‚¯ã‚¤ã‚ºä½œæˆUIè¦ä»¶](../1.02_user-stories/us-02_quiz-creation.md)
- [ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼åˆ†æ: US-02](docs/project/ddd-design/2.02.5_user-flow-analysis/user-flow-analysis.md#us-02-ã‚¯ã‚¤ã‚ºä½œæˆåŒ¿åãƒ¦ãƒ¼ã‚¶ãƒ¼)

## ãƒ¡ã‚¤ãƒ³ãƒ•ãƒ­ãƒ¼å›³

```mermaid
flowchart TD
    Start([Createã‚¿ãƒ–ã‚¢ã‚¯ã‚»ã‚¹]) --> Check{ä½œæˆæ¨©é™ç¢ºèª}
    Check -->|OK| Welcome[ä½œæˆé–‹å§‹ç”»é¢]
    Check -->|åˆ¶é™| Limit[åˆ¶é™èª¬æ˜ç”»é¢]
    
    Welcome --> Draft{ä¸‹æ›¸ãã‚ã‚Š?}
    Draft -->|Yes| Resume[ä¸‹æ›¸ãå¾©å…ƒç¢ºèª]
    Draft -->|No| Step1[Step1: å•é¡Œæ–‡å…¥åŠ›]
    
    Resume --> R1{å¾©å…ƒã™ã‚‹?}
    R1 -->|Yes| LoadDraft[ä¸‹æ›¸ããƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿]
    R1 -->|No| ClearDraft[ä¸‹æ›¸ãã‚¯ãƒªã‚¢]
    
    LoadDraft --> ReviewDraft[ä¸‹æ›¸ãå†…å®¹ç¢ºèª]
    ClearDraft --> Step1
    ReviewDraft --> Step1
    
    Step1 --> Validate1{å•é¡Œæ–‡ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³}
    Validate1 -->|OK| Step2[Step2: æ­£è§£é¸æŠ]
    Validate1 -->|NG| Error1[ã‚¨ãƒ©ãƒ¼è¡¨ç¤º] --> Step1
    
    Step2 --> Validate2{æ­£è§£ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³}
    Validate2 -->|OK| Step3[Step3: è§£èª¬å…¥åŠ›]
    Validate2 -->|NG| Error2[ã‚¨ãƒ©ãƒ¼è¡¨ç¤º] --> Step2
    
    Step3 --> Validate3{è§£èª¬ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³}
    Validate3 -->|OK| Step4[Step4: ã‚¿ã‚°è¨­å®š]
    Validate3 -->|NG| Error3[ã‚¨ãƒ©ãƒ¼è¡¨ç¤º] --> Step3
    
    Step4 --> Validate4{ã‚¿ã‚°ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³}
    Validate4 -->|å…¬èªã‚¿ã‚°ãªã—| TagError[å…¬èªã‚¿ã‚°å¿…é ˆè­¦å‘Š] --> Step4
    Validate4 -->|OK| Preview[ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»é¢]
    
    Preview --> PreviewAction{ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³}
    PreviewAction -->|ä¿®æ­£| BackToStep[ä¿®æ­£ç”»é¢é¸æŠ] --> Step1
    PreviewAction -->|æŠ•ç¨¿| Confirm[æŠ•ç¨¿ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°]
    
    Confirm --> ConfirmAction{æŠ•ç¨¿å®Ÿè¡Œ?}
    ConfirmAction -->|Yes| Submit[æŠ•ç¨¿å‡¦ç†]
    ConfirmAction -->|No| Preview
    
    Submit --> Processing[æŠ•ç¨¿å‡¦ç†ä¸­]
    Processing --> Result{æŠ•ç¨¿çµæœ}
    Result -->|æˆåŠŸ| Success[æŠ•ç¨¿å®Œäº†ç”»é¢]
    Result -->|å¤±æ•—| Failed[ã‚¨ãƒ©ãƒ¼å‡¦ç†]
    
    Success --> NextAction{æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³}
    NextAction -->|æ–°è¦ä½œæˆ| Welcome
    NextAction -->|ä½œæˆã‚¯ã‚¤ã‚ºç¢ºèª| MyCreated[æŠ•ç¨¿ç®¡ç†ç”»é¢]
    NextAction -->|ã‚¯ã‚¤ã‚ºã‚’è§£ã| QuizPlay[ã‚¯ã‚¤ã‚ºå›ç­”ã¸]
    NextAction -->|MyPage| MyPage[ãƒã‚¤ãƒšãƒ¼ã‚¸]
    
    Failed --> Retry{å†è©¦è¡Œ?}
    Retry -->|Yes| Submit
    Retry -->|ä¸‹æ›¸ãä¿å­˜| SaveDraft[ç·Šæ€¥ä¿å­˜]
    Retry -->|No| End([çµ‚äº†])
    
    Limit --> LimitAction{åˆ¶é™å¯¾å¿œ}
    LimitAction -->|ç†è§£| End
    LimitAction -->|è©³ç´°ç¢ºèª| LimitDetail[åˆ¶é™è©³ç´°èª¬æ˜]
    
    SaveDraft --> DraftSaved[ä¿å­˜å®Œäº†] --> End
    LimitDetail --> End
```

## è©³ç´°ãƒ•ãƒ­ãƒ¼

### 1. åˆæœŸåŒ–ãƒ»æ¨©é™ç¢ºèªãƒ•ã‚§ãƒ¼ã‚º

```mermaid
flowchart TD
    subgraph "Initialization Phase"
        A[Createã‚¿ãƒ–é¸æŠ] --> B[ãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹ç¢ºèª]
        B --> C{ä½œæˆåˆ¶é™ãƒã‚§ãƒƒã‚¯}
        
        C -->|åˆ¶é™ãªã—| D[ä½œæˆæ¨©é™OK]
        C -->|æ™‚é–“åˆ¶é™| E[æ™‚é–“åˆ¶é™è­¦å‘Š]
        C -->|å®¹é‡åˆ¶é™| F[å®¹é‡åˆ¶é™è­¦å‘Š]
        C -->|ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ¶é™| G[ã‚ªãƒ•ãƒ©ã‚¤ãƒ³åˆ¶é™]
        
        D --> H[ä¸‹æ›¸ãå­˜åœ¨ç¢ºèª]
        E --> I{åˆ¶é™å—å®¹?}
        F --> J{å®¹é‡ç¢ºä¿?}
        G --> K[ã‚ªãƒ•ãƒ©ã‚¤ãƒ³èª¬æ˜]
        
        I -->|Yes| H
        I -->|No| L[ä½œæˆä¸­æ­¢]
        
        J -->|Yes| M[å®¹é‡ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—] --> H
        J -->|No| L
        
        K --> N{ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç†è§£?}
        N -->|Yes| L
        N -->|No| O[è©³ç´°èª¬æ˜] --> L
    end
    
    subgraph "Draft Management"
        H --> P{ä¸‹æ›¸ãã‚ã‚Š?}
        P -->|Yes| Q[ä¸‹æ›¸ããƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º]
        P -->|No| R[æ–°è¦ä½œæˆé–‹å§‹]
        
        Q --> S{ä¸‹æ›¸ãæ“ä½œ}
        S -->|å¾©å…ƒ| T[ä¸‹æ›¸ãå¾©å…ƒå‡¦ç†]
        S -->|å‰Šé™¤| U[ä¸‹æ›¸ãå‰Šé™¤ç¢ºèª]
        S -->|æ–°è¦| V[ä¸‹æ›¸ãä¿æŒã§æ–°è¦]
        
        T --> W[å¾©å…ƒãƒ‡ãƒ¼ã‚¿æ¤œè¨¼]
        U --> X{å‰Šé™¤ç¢ºèª?}
        V --> R
        
        X -->|Yes| Y[ä¸‹æ›¸ãå‰Šé™¤] --> R
        X -->|No| Q
        
        W --> Z{ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§OK?}
        Z -->|Yes| AA[ãƒ•ã‚©ãƒ¼ãƒ å¾©å…ƒ]
        Z -->|No| BB[å¾©å…ƒã‚¨ãƒ©ãƒ¼] --> R
    end
```

### 2. æ®µéšçš„å…¥åŠ›ãƒ•ã‚§ãƒ¼ã‚º

```mermaid
flowchart TD
    subgraph "Step 1: Question Input"
        A[å•é¡Œæ–‡å…¥åŠ›ç”»é¢] --> B[å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ•ã‚©ãƒ¼ã‚«ã‚¹]
        B --> C[ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ]
        C --> D{å…¥åŠ›ä¸­ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³}
        
        D -->|æ–‡å­—æ•°OK| E[å…¥åŠ›ç¶™ç¶š]
        D -->|æ–‡å­—æ•°è¶…é| F[è­¦å‘Šè¡¨ç¤º]
        D -->|å¿…é ˆæœªå…¥åŠ›| G[å¿…é ˆè­¦å‘Š]
        
        E --> H[è‡ªå‹•ä¿å­˜ã‚¿ã‚¤ãƒãƒ¼]
        F --> I[å…¥åŠ›åˆ¶é™]
        G --> J[é€²è¡Œé˜²æ­¢]
        
        H --> K{30ç§’çµŒé?}
        K -->|Yes| L[ä¸‹æ›¸ãè‡ªå‹•ä¿å­˜]
        K -->|No| H
        
        I --> M[åˆ¶é™è§£é™¤å¾…ã¡] --> E
        J --> N[å…¥åŠ›ä¿ƒé€²ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]
        
        L --> O{ä¿å­˜æˆåŠŸ?}
        O -->|Yes| P[ä¿å­˜å®Œäº†é€šçŸ¥]
        O -->|No| Q[ä¿å­˜å¤±æ•—è­¦å‘Š]
        
        N --> E
        P --> R[æ¬¡ã‚¹ãƒ†ãƒƒãƒ—ãƒœã‚¿ãƒ³æœ‰åŠ¹åŒ–]
        Q --> S[æ‰‹å‹•ä¿å­˜ææ¡ˆ]
    end
    
    subgraph "Step 2: Answer Selection"
        T[æ­£è§£é¸æŠç”»é¢] --> U[ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³è¡¨ç¤º]
        U --> V{é¸æŠæ“ä½œ}
        
        V -->|â—¯é¸æŠ| W[â—¯å›ç­”è¨­å®š]
        V -->|Ã—é¸æŠ| X[Ã—å›ç­”è¨­å®š]
        
        W --> Y[é¸æŠçŠ¶æ…‹è¦–è¦šåŒ–]
        X --> Y
        
        Y --> Z[ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°]
        Z --> AA[æ¬¡ã‚¹ãƒ†ãƒƒãƒ—æœ‰åŠ¹åŒ–]
    end
    
    subgraph "Step 3: Explanation Input"
        BB[è§£èª¬å…¥åŠ›ç”»é¢] --> CC[ä»»æ„å…¥åŠ›èª¬æ˜]
        CC --> DD{å…¥åŠ›æœ‰ç„¡}
        
        DD -->|å…¥åŠ›ã‚ã‚Š| EE[æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆè¡¨ç¤º]
        DD -->|ã‚¹ã‚­ãƒƒãƒ—| FF[ã‚¹ã‚­ãƒƒãƒ—ç¢ºèª]
        
        EE --> GG{æ–‡å­—æ•°ãƒã‚§ãƒƒã‚¯}
        GG -->|åˆ¶é™å†…| HH[å…¥åŠ›ç¶™ç¶š]
        GG -->|è¶…é| II[æ–‡å­—æ•°è­¦å‘Š]
        
        FF --> JJ{ã‚¹ã‚­ãƒƒãƒ—ç¢ºèª?}
        JJ -->|Yes| KK[è§£èª¬ãªã—ã§ç¶™ç¶š]
        JJ -->|No| CC
        
        HH --> LL[ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼]
        II --> MM[å…¥åŠ›èª¿æ•´ä¿ƒé€²]
        KK --> NN[æ¬¡ã‚¹ãƒ†ãƒƒãƒ—ç§»è¡Œ]
        
        LL --> OO[å“è³ªãƒ’ãƒ³ãƒˆè¡¨ç¤º]
        MM --> HH
        OO --> PP[å…¥åŠ›å®Œäº†åˆ¤å®š]
    end
```

### 3. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»æŠ•ç¨¿ãƒ•ã‚§ãƒ¼ã‚º

```mermaid
flowchart TD
    subgraph "Preview Phase"
        A[ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»é¢æ§‹ç¯‰] --> B[å…¥åŠ›ãƒ‡ãƒ¼ã‚¿çµ±åˆ]
        B --> C[ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼UIç”Ÿæˆ]
        C --> D[Playç”»é¢å½¢å¼è¡¨ç¤º]
        
        D --> E{ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ“ä½œ}
        E -->|ã‚¹ãƒ¯ã‚¤ãƒ—ãƒ†ã‚¹ãƒˆ| F[æ“ä½œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³]
        E -->|å†…å®¹ç¢ºèª| G[è©³ç´°è¡¨ç¤ºåˆ‡æ›¿]
        E -->|ä¿®æ­£| H[ä¿®æ­£ç”»é¢é¸æŠ]
        E -->|æŠ•ç¨¿| I[æŠ•ç¨¿ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°]
        
        F --> J[æ“ä½œãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯]
        G --> K[ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º]
        H --> L{ä¿®æ­£ç®‡æ‰€é¸æŠ}
        
        L -->|å•é¡Œæ–‡| M[Step1æˆ»ã‚Š]
        L -->|æ­£è§£| N[Step2æˆ»ã‚Š]
        L -->|è§£èª¬| O[Step3æˆ»ã‚Š]
        L -->|ã‚¿ã‚°| P[Step4æˆ»ã‚Š]
        
        J --> Q[ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¶™ç¶š]
        K --> Q
        Q --> E
    end
    
    subgraph "Submission Phase"
        I --> R[æŠ•ç¨¿ç¢ºèªå†…å®¹è¡¨ç¤º]
        R --> S{æœ€çµ‚ç¢ºèª}
        
        S -->|æŠ•ç¨¿å®Ÿè¡Œ| T[æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿æ§‹ç¯‰]
        S -->|ã‚­ãƒ£ãƒ³ã‚»ãƒ«| U[ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æˆ»ã‚Š]
        
        T --> V[ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³]
        V --> W{ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœ}
        
        W -->|OK| X[ã‚µãƒ¼ãƒãƒ¼é€ä¿¡]
        W -->|NG| Y[ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼]
        
        X --> Z[é€ä¿¡å‡¦ç†ä¸­è¡¨ç¤º]
        Y --> AA[ã‚¨ãƒ©ãƒ¼è©³ç´°è¡¨ç¤º]
        
        Z --> BB{é€ä¿¡çµæœ}
        BB -->|æˆåŠŸ| CC[æŠ•ç¨¿æˆåŠŸå‡¦ç†]
        BB -->|å¤±æ•—| DD[æŠ•ç¨¿å¤±æ•—å‡¦ç†]
        
        AA --> EE[ä¿®æ­£è¦æ±‚] --> U
        CC --> FF[æˆåŠŸç”»é¢è¡¨ç¤º]
        DD --> GG[ã‚¨ãƒ©ãƒ¼ç”»é¢è¡¨ç¤º]
    end
```

### 4. å®Œäº†ãƒ»æ¬¡ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ•ã‚§ãƒ¼ã‚º

```mermaid
flowchart TD
    subgraph "Success Phase"
        A[æŠ•ç¨¿æˆåŠŸ] --> B[ä½œæˆè€…è­˜åˆ¥IDç”Ÿæˆ]
        B --> C[æ‰¿èªå¾…ã¡çŠ¶æ…‹è¨­å®š]
        C --> D[å®Œäº†ç”»é¢æ§‹ç¯‰]
        
        D --> E[ğŸ‰æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]
        E --> F[æ‰¿èªãƒ—ãƒ­ã‚»ã‚¹èª¬æ˜]
        F --> G[ä½œæˆã‚¯ã‚¤ã‚ºãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼]
        G --> H[æ¬¡ã‚¢ã‚¯ã‚·ãƒ§ãƒ³é¸æŠè‚¢]
    end
    
    subgraph "Next Actions"
        H --> I{ã‚¢ã‚¯ã‚·ãƒ§ãƒ³é¸æŠ}
        
        I -->|æ–°è¦ä½œæˆ| J[æ–°ã—ã„ã‚¯ã‚¤ã‚ºä½œæˆ]
        I -->|ä½œæˆç¢ºèª| K[ä½œæˆã—ãŸã‚¯ã‚¤ã‚ºç¢ºèª]
        I -->|ã‚¯ã‚¤ã‚ºãƒ—ãƒ¬ã‚¤| L[ä½œæˆã‚¯ã‚¤ã‚ºã§éŠã¶]
        I -->|MyPage| M[ãƒã‚¤ãƒšãƒ¼ã‚¸ç¢ºèª]
        I -->|ãƒ›ãƒ¼ãƒ | N[ãƒ›ãƒ¼ãƒ ç”»é¢æˆ»ã‚Š]
        
        J --> O[ä½œæˆãƒ•ãƒ­ãƒ¼å†é–‹å§‹]
        K --> P[æŠ•ç¨¿ç®¡ç†ç”»é¢]
        L --> Q{æ‰¿èªçŠ¶æ…‹ç¢ºèª}
        
        Q -->|æ‰¿èªæ¸ˆã¿| R[é€šå¸¸ãƒ—ãƒ¬ã‚¤é–‹å§‹]
        Q -->|æ‰¿èªå¾…ã¡| S[ä½œæˆè€…é™å®šãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼]
        
        M --> T[ãƒã‚¤ãƒšãƒ¼ã‚¸è¡¨ç¤º]
        N --> U[ãƒ›ãƒ¼ãƒ è¡¨ç¤º]
        P --> V[æŠ•ç¨¿ä¸€è¦§ãƒ»çµ±è¨ˆ]
        
        S --> W[ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰è¡¨ç¤º]
        W --> X[å®Ÿéš›ã®è¡¨ç¤ºç¢ºèª]
    end
    
    subgraph "Error Recovery"
        Y[æŠ•ç¨¿å¤±æ•—] --> Z{ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥åˆ¤å®š}
        
        Z -->|ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯| AA[æ¥ç¶šã‚¨ãƒ©ãƒ¼å‡¦ç†]
        Z -->|ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³| BB[å…¥åŠ›ã‚¨ãƒ©ãƒ¼å‡¦ç†]
        Z -->|ã‚µãƒ¼ãƒãƒ¼| CC[ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼å‡¦ç†]
        Z -->|å®¹é‡| DD[å®¹é‡ã‚¨ãƒ©ãƒ¼å‡¦ç†]
        
        AA --> EE[å†è©¦è¡Œææ¡ˆ]
        BB --> FF[ä¿®æ­£è¦æ±‚]
        CC --> GG[æ™‚é–“ã‚’ãŠã„ã¦å†è©¦è¡Œ]
        DD --> HH[ãƒ‡ãƒ¼ã‚¿å‰Šæ¸›ææ¡ˆ]
        
        EE --> II{å†è©¦è¡Œ?}
        II -->|Yes| JJ[æŠ•ç¨¿å†å®Ÿè¡Œ]
        II -->|ä¸‹æ›¸ãä¿å­˜| KK[ç·Šæ€¥ä¸‹æ›¸ãä¿å­˜]
        II -->|No| LL[ä½œæˆä¸­æ­¢]
    end
```

## ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«

### å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

```mermaid
graph TD
    subgraph "Question Validation"
        A[å•é¡Œæ–‡å…¥åŠ›] --> B{æ–‡å­—æ•°ãƒã‚§ãƒƒã‚¯}
        B -->|1-500æ–‡å­—| C{å†…å®¹å“è³ªãƒã‚§ãƒƒã‚¯}
        B -->|ç¯„å›²å¤–| D[æ–‡å­—æ•°ã‚¨ãƒ©ãƒ¼]
        
        C -->|æ˜ç¢ºãªæ–‡ç« | E{HTMLã‚¿ã‚°ãƒã‚§ãƒƒã‚¯}
        C -->|æ›–æ˜§ãƒ»ä¸æ˜ç¢º| F[å“è³ªè­¦å‘Š]
        
        E -->|ã‚¿ã‚°ãªã—| G[ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é€šé]
        E -->|ã‚¿ã‚°ã‚ã‚Š| H[ã‚µãƒ‹ã‚¿ã‚¤ã‚ºå‡¦ç†]
        
        F --> I[æ”¹å–„ææ¡ˆè¡¨ç¤º]
        H --> J[ã‚¿ã‚°é™¤å»] --> G
    end
    
    subgraph "Answer Validation"
        K[æ­£è§£é¸æŠ] --> L{é¸æŠç¢ºèª}
        L -->|â—¯ã¾ãŸã¯Ã—é¸æŠæ¸ˆã¿| M[ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é€šé]
        L -->|æœªé¸æŠ| N[é¸æŠå¿…é ˆã‚¨ãƒ©ãƒ¼]
        
        M --> O[é¸æŠå†…å®¹ç¢ºå®š]
        N --> P[é¸æŠä¿ƒé€²ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]
    end
    
    subgraph "Tag Validation"
        Q[ã‚¿ã‚°è¨­å®š] --> R{å…¬èªã‚¿ã‚°ãƒã‚§ãƒƒã‚¯}
        R -->|1ã¤ä»¥ä¸Šé¸æŠ| S{ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚°ãƒã‚§ãƒƒã‚¯}
        R -->|æœªé¸æŠ| T[å…¬èªã‚¿ã‚°å¿…é ˆã‚¨ãƒ©ãƒ¼]
        
        S -->|é©åˆ‡ãªå½¢å¼| U[ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é€šé]
        S -->|ä¸é©åˆ‡å½¢å¼| V[ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè­¦å‘Š]
        
        T --> W[å…¬èªã‚¿ã‚°é¸æŠä¿ƒé€²]
        V --> X[ä¿®æ­£æ¡ˆæç¤º]
    end
```

### ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯

```javascript
interface ValidationRules {
  question: {
    required: true;
    minLength: 1;
    maxLength: 500;
    allowHTML: false;
    sanitize: true;
  };
  
  correctAnswer: {
    required: true;
    type: 'boolean';
    values: [true, false]; // â—¯=true, Ã—=false
  };
  
  explanation: {
    required: false;
    maxLength: 1000;
    allowHTML: false;
    sanitize: true;
  };
  
  tags: {
    officialTags: {
      required: true;
      minCount: 1;
      validTags: ['ä¸€èˆ¬å¸¸è­˜', 'æ­´å²', 'ç§‘å­¦', /*...*/];
    };
    userTags: {
      required: false;
      maxCount: 5;
      pattern: /^[a-zA-Z0-9ã²ã‚‰ãŒãªã‚«ã‚¿ã‚«ãƒŠæ¼¢å­—\s]+$/;
    };
  };
}
```

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼å‡¦ç†

```mermaid
flowchart TD
    A[æŠ•ç¨¿å‡¦ç†ä¸­] --> B{ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çŠ¶æ…‹}
    B -->|æ¥ç¶šOK| C[æ­£å¸¸æŠ•ç¨¿å‡¦ç†]
    B -->|æ¥ç¶šä¸å®‰å®š| D[æ¥ç¶šã‚¨ãƒ©ãƒ¼æ¤œå‡º]
    B -->|å®Œå…¨æ–­ç·š| E[ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œå‡º]
    
    C --> F[æŠ•ç¨¿å®Œäº†]
    
    D --> G[è‡ªå‹•å†è©¦è¡Œ]
    G --> H{å†è©¦è¡Œçµæœ}
    H -->|æˆåŠŸ| F
    H -->|å¤±æ•—| I[æ‰‹å‹•å†è©¦è¡Œææ¡ˆ]
    
    E --> J[ã‚ªãƒ•ãƒ©ã‚¤ãƒ³é€šçŸ¥]
    J --> K[ä¸‹æ›¸ãä¿å­˜ææ¡ˆ]
    K --> L{ä¿å­˜é¸æŠ}
    L -->|Yes| M[ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜]
    L -->|No| N[ãƒ‡ãƒ¼ã‚¿ä¿æŒ]
    
    I --> O{ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠ}
    O -->|å†è©¦è¡Œ| P[æ‰‹å‹•å†é€ä¿¡]
    O -->|ä¸‹æ›¸ãä¿å­˜| M
    O -->|ä¸­æ­¢| Q[ä½œæˆä¸­æ­¢]
    
    M --> R[ä¿å­˜å®Œäº†é€šçŸ¥]
    N --> S[æ¥ç¶šå¾©æ—§å¾…ã¡]
    P --> T{é€ä¿¡çµæœ}
    T -->|æˆåŠŸ| F
    T -->|å¤±æ•—| U[ã‚¨ãƒ©ãƒ¼è©³ç´°è¡¨ç¤º]
    
    R --> V[å¾Œã§é€ä¿¡å¯èƒ½]
    S --> W[å®šæœŸæ¥ç¶šç¢ºèª]
    U --> X[ã‚µãƒãƒ¼ãƒˆé€£çµ¡ææ¡ˆ]
```

## çŠ¶æ…‹ç®¡ç†

### ä½œæˆãƒ•ã‚©ãƒ¼ãƒ çŠ¶æ…‹

```javascript
interface QuizCreationState {
  // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿
  formData: {
    question: string;
    correctAnswer: boolean | null;
    explanation: string;
    officialTags: string[];
    userTags: string[];
  };
  
  // UIçŠ¶æ…‹
  currentStep: 1 | 2 | 3 | 4 | 'preview';
  isValid: boolean;
  errors: Record<string, string[]>;
  
  // ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹
  isDraftSaved: boolean;
  isSubmitting: boolean;
  lastSaved: Date | null;
  
  // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çŠ¶æ…‹
  previewMode: 'form' | 'play';
  previewData: Quiz | null;
}
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“

- **ã‚¹ãƒ†ãƒƒãƒ—é·ç§»**: â‰¤ 200ms
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: â‰¤ 100ms  
- **ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°**: â‰¤ 500ms
- **è‡ªå‹•ä¿å­˜**: â‰¤ 1000ms
- **æŠ•ç¨¿å‡¦ç†**: â‰¤ 3000ms

### ãƒ‡ãƒ¼ã‚¿ç®¡ç†

- **ä¸‹æ›¸ãä¿å­˜**: 30ç§’é–“éš”ã®è‡ªå‹•ä¿å­˜
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œè¨¼
- **ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**: å…¥åŠ›å¤‰æ›´ã‹ã‚‰500mså¾Œæ›´æ–°
- **ãƒ‡ãƒ¼ã‚¿åŒæœŸ**: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¾©æ—§æ™‚ã®è‡ªå‹•é€ä¿¡

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ã‚¯ã‚¤ã‚ºæ‰¿èªãƒ•ãƒ­ãƒ¼](quiz-approval-flow.md)
- [ã‚¯ã‚¤ã‚ºä½œæˆãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ](../3.01_wireframes/quiz-creation-page.md)
- [æŠ•ç¨¿å®Œäº†ç”»é¢](../3.01_wireframes/quiz-submission-success-page.md)

---
**ä½œæˆå·¥ç¨‹**: UIè¨­è¨ˆ  
**ä½œæˆæ—¥**: 2025-01-31  
**æ›´æ–°æ—¥**: 2025-01-31